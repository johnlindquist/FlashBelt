package com.johnlindquist.flashbelt.controller{	import flight.domain.AsyncCommand;	import flight.list.Collection;	import com.johnlindquist.flashbelt.model.TwitterModel;	import com.johnlindquist.flashbelt.model.vo.LoginVO;	import com.johnlindquist.flashbelt.service.LoginService;	import com.johnlindquist.flashbelt.state.MainViewState;	import com.swfjunkie.tweetr.data.DataParser;	import com.swfjunkie.tweetr.data.objects.StatusData;	public class LoginAndGetMentionsCommand extends AsyncCommand 	{		public var loginVO:LoginVO;		[Inject]		public var loginService:LoginService;		[Inject]		public var mainViewState:MainViewState;		[Inject]		public var twitterModel:TwitterModel;		public function LoginAndGetMentionsCommand(loginVO:LoginVO) 		{			this.loginVO = loginVO;
		}
				override public function execute():void		{			trace("logging in");			response = loginService.login(loginVO.username, loginVO.password);			response.addResultHandler(onResult);			response.addFaultHandler(onFault);		}		private function onResult(data:*):void		{			trace("on result", "LoginAndGetMentionsCommand");			if(data is String)			{				trace("1")				twitterModel.mentions = new Collection(DataParser.parseStatuses(XML(data)));				trace("2")				twitterModel.imageURLs = new Collection();				trace("3")				for each (var statusData : StatusData in twitterModel.mentions) 				{					trace("4")					twitterModel.imageURLs.addItem(statusData.user.profileImageUrl);					trace("5")					trace("statusData.user.profileImageUrl", statusData.user.profileImageUrl);				}					trace("6")				//				mainViewState.currentState = MainViewState.BOX2D_FLASH_VIEW;					}		}		private function onFault():void		{		}	}}